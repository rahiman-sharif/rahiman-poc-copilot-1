<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <h1><i class="fas fa-building"></i> Company Settings</h1>
                <p>Configure Company Information</p>
            </div>
            <div class="user-section">
                <div class="user-info">
                    <div class="user-name"><%= user.fullName %></div>
                    <div class="user-role"><%= user.role %></div>
                </div>
                <a href="/logout" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/dashboard"><i class="fas fa-home"></i> Dashboard</a>
            <span class="separator">/</span>
            <a href="/settings">Settings</a>
            <span class="separator">/</span>
            <span class="current">Company Settings</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="items-main">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-left">
                <h2><i class="fas fa-building"></i> Company Settings</h2>
                <p>Configure your company information and branding</p>
            </div>
            <div class="header-right">
                <a href="/settings" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Settings
                </a>
            </div>
        </div>

        <!-- Alert Messages -->
        <% if (typeof message !== 'undefined' && message) { %>
            <div class="alert alert-<%= message.type %>">
                <i class="fas fa-<%= message.type === 'success' ? 'check-circle' : 'exclamation-triangle' %>"></i>
                <%= message.text %>
            </div>
        <% } %>

        <% if (typeof success !== 'undefined' && success) { %>
            <div class="alert alert-success">
                <i class="fas fa-check-circle"></i>
                <%= success %>
            </div>
        <% } %>

        <% if (typeof error !== 'undefined' && error) { %>
            <div class="alert alert-error">
                <i class="fas fa-exclamation-triangle"></i>
                <%= error %>
            </div>
        <% } %>

        <!-- Company Settings Form -->
        <div class="form-container">
            <form action="/settings/company" method="POST" class="form-card">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Company Name *</label>
                            <input type="text" id="name" name="name" 
                                   value="<%= company ? company.name : 'Vikram Steels' %>" 
                                   required>
                            <small class="form-help">Your company's legal business name</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" 
                                   value="<%= company ? company.email : 'info@vikramsteels.com' %>">
                            <small class="form-help">Primary contact email</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" 
                                   value="<%= company ? company.phone : '+91 98765 43210' %>">
                            <small class="form-help">Primary contact number</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="website">Website</label>
                            <input type="url" id="website" name="website" 
                                   value="<%= company ? company.website : '' %>" 
                                   placeholder="https://www.vikramsteels.com">
                            <small class="form-help">Company website URL</small>
                        </div>
                    </div>
                </div>

                <!-- Address Information -->
                <div class="form-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Address Information</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="address">Street Address *</label>
                            <textarea id="address" name="address" rows="3" required><%= company ? company.address : '123 Steel Market Road\nIndustrial Area' %></textarea>
                            <small class="form-help">Complete street address</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="city">City *</label>
                            <input type="text" id="city" name="city" 
                                   value="<%= company ? company.city : 'Mumbai' %>" 
                                   required>
                        </div>
                        
                        <div class="form-group">
                            <label for="state">State *</label>
                            <select id="state" name="state" required>
                                <option value="">Select State</option>
                                <option value="Maharashtra" <%= company && company.state === 'Maharashtra' ? 'selected' : '' %>>Maharashtra</option>
                                <option value="Gujarat" <%= company && company.state === 'Gujarat' ? 'selected' : '' %>>Gujarat</option>
                                <option value="Karnataka" <%= company && company.state === 'Karnataka' ? 'selected' : '' %>>Karnataka</option>
                                <option value="Tamil Nadu" <%= company && company.state === 'Tamil Nadu' ? 'selected' : '' %>>Tamil Nadu</option>
                                <option value="Andhra Pradesh" <%= company && company.state === 'Andhra Pradesh' ? 'selected' : '' %>>Andhra Pradesh</option>
                                <option value="Telangana" <%= company && company.state === 'Telangana' ? 'selected' : '' %>>Telangana</option>
                                <option value="Rajasthan" <%= company && company.state === 'Rajasthan' ? 'selected' : '' %>>Rajasthan</option>
                                <option value="Punjab" <%= company && company.state === 'Punjab' ? 'selected' : '' %>>Punjab</option>
                                <option value="Haryana" <%= company && company.state === 'Haryana' ? 'selected' : '' %>>Haryana</option>
                                <option value="Uttar Pradesh" <%= company && company.state === 'Uttar Pradesh' ? 'selected' : '' %>>Uttar Pradesh</option>
                                <option value="West Bengal" <%= company && company.state === 'West Bengal' ? 'selected' : '' %>>West Bengal</option>
                                <option value="Odisha" <%= company && company.state === 'Odisha' ? 'selected' : '' %>>Odisha</option>
                                <option value="Kerala" <%= company && company.state === 'Kerala' ? 'selected' : '' %>>Kerala</option>
                                <option value="Madhya Pradesh" <%= company && company.state === 'Madhya Pradesh' ? 'selected' : '' %>>Madhya Pradesh</option>
                                <option value="Chhattisgarh" <%= company && company.state === 'Chhattisgarh' ? 'selected' : '' %>>Chhattisgarh</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="pincode">PIN Code *</label>
                            <input type="text" id="pincode" name="pincode" 
                                   value="<%= company ? company.pincode : '400001' %>" 
                                   pattern="[0-9]{6}" maxlength="6" required>
                            <small class="form-help">6-digit postal code</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="country">Country</label>
                            <input type="text" id="country" name="country" 
                                   value="<%= company ? company.country : 'India' %>" 
                                   readonly>
                        </div>
                    </div>
                </div>

                <!-- Legal & Tax Information -->
                <div class="form-section">
                    <h3><i class="fas fa-file-contract"></i> Legal & Tax Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="gstin">GSTIN Number</label>
                            <input type="text" id="gstin" name="gstin" 
                                   value="<%= company ? company.gstin : '27ABCDE1234F1Z5' %>" 
                                   pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}" 
                                   maxlength="15" placeholder="27ABCDE1234F1Z5">
                            <small class="form-help">15-character GST identification number</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="panNumber">PAN Number</label>
                            <input type="text" id="panNumber" name="panNumber" 
                                   value="<%= company ? company.panNumber : 'ABCDE1234F' %>" 
                                   pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" 
                                   maxlength="10" placeholder="ABCDE1234F">
                            <small class="form-help">10-character PAN number</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="incorporationDate">Incorporation Date</label>
                            <input type="date" id="incorporationDate" name="incorporationDate" 
                                   value="<%= company ? company.incorporationDate : '' %>">
                            <small class="form-help">Date of company incorporation</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="businessType">Business Type</label>
                            <select id="businessType" name="businessType">
                                <option value="">Select Type</option>
                                <option value="Sole Proprietorship" <%= company && company.businessType === 'Sole Proprietorship' ? 'selected' : '' %>>Sole Proprietorship</option>
                                <option value="Partnership" <%= company && company.businessType === 'Partnership' ? 'selected' : '' %>>Partnership</option>
                                <option value="Private Limited" <%= company && company.businessType === 'Private Limited' ? 'selected' : '' %>>Private Limited</option>
                                <option value="Public Limited" <%= company && company.businessType === 'Public Limited' ? 'selected' : '' %>>Public Limited</option>
                                <option value="LLP" <%= company && company.businessType === 'LLP' ? 'selected' : '' %>>Limited Liability Partnership</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Banking Information -->
                <div class="form-section">
                    <h3><i class="fas fa-university"></i> Banking Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="bankName">Bank Name</label>
                            <input type="text" id="bankName" name="bankName" 
                                   value="<%= company ? company.bankName : 'State Bank of India' %>">
                            <small class="form-help">Primary bank for business transactions</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="accountNumber">Account Number</label>
                            <input type="text" id="accountNumber" name="accountNumber" 
                                   value="<%= company ? company.accountNumber : '12345678901' %>">
                            <small class="form-help">Bank account number</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="ifscCode">IFSC Code</label>
                            <input type="text" id="ifscCode" name="ifscCode" 
                                   value="<%= company ? company.ifscCode : 'SBIN0001234' %>" 
                                   pattern="[A-Z]{4}0[A-Z0-9]{6}" maxlength="11">
                            <small class="form-help">11-character IFSC code</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="branch">Branch Name</label>
                            <input type="text" id="branch" name="branch" 
                                   value="<%= company ? company.branch : 'Mumbai Main Branch' %>">
                            <small class="form-help">Bank branch name</small>
                        </div>
                    </div>
                </div>

                <!-- Business Details -->
                <div class="form-section">
                    <h3><i class="fas fa-industry"></i> Business Details</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="description">Business Description</label>
                            <textarea id="description" name="description" rows="3"><%= company ? company.description : 'Leading supplier of steel and construction materials in Mumbai. Providing quality products to construction companies, contractors, and individual builders since 1995.' %></textarea>
                            <small class="form-help">Brief description of your business</small>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="termsConditions">Terms & Conditions</label>
                            <textarea id="termsConditions" name="termsConditions" rows="4"><%= company ? company.termsConditions : 'Payment Terms: 30 days from invoice date\nDelivery charges extra\nGoods once sold will not be taken back\nSubject to Mumbai jurisdiction' %></textarea>
                            <small class="form-help">Default terms and conditions for invoices</small>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="invoiceFooter">Invoice Footer</label>
                            <textarea id="invoiceFooter" name="invoiceFooter" rows="2"><%= company ? company.invoiceFooter : 'Thank you for your business! | Email: info@vikramsteels.com | Phone: +91 98765 43210' %></textarea>
                            <small class="form-help">Footer text to appear on all invoices</small>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Company Settings
                    </button>
                    <a href="/settings" class="btn btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                    <button type="button" class="btn btn-warning" onclick="resetForm()">
                        <i class="fas fa-undo"></i> Reset Form
                    </button>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <p>&copy; 2024 Vikram Steels. Company Settings Configuration</p>
    </footer>

    <script>
        // Auto-hide alerts
        document.addEventListener('DOMContentLoaded', function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                setTimeout(() => {
                    alert.style.opacity = '0';
                    setTimeout(() => alert.remove(), 300);
                }, 5000);
            });
        });

        // Reset form function
        function resetForm() {
            if (confirm('Are you sure you want to reset all changes?')) {
                document.querySelector('form').reset();
            }
        }

        // Auto-format GSTIN
        document.getElementById('gstin').addEventListener('input', function(e) {
            const value = e.target.value.toUpperCase();
            e.target.value = value;
        });

        // Auto-format PAN
        document.getElementById('panNumber').addEventListener('input', function(e) {
            const value = e.target.value.toUpperCase();
            e.target.value = value;
        });

        // Auto-format IFSC
        document.getElementById('ifscCode').addEventListener('input', function(e) {
            const value = e.target.value.toUpperCase();
            e.target.value = value;
        });

        // Auto-format pincode
        document.getElementById('pincode').addEventListener('input', function(e) {
            const value = e.target.value.replace(/\D/g, '');
            e.target.value = value;
        });
    </script>
</body>
</html>
